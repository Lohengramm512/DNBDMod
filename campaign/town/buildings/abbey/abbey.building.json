{
    "on_start_town_visit_priority": 1,

    "requirements":
    {
        "number_of_quests_finished": 2,
        "highest_dungeon_level": 0
    },

    "data":
    {
        "activities":
        {
            "meditation":
            {
                "side_effects":
                {
                    "chance": 0.40,
                    "results":
                    [
                        {
                            "type": "activity_lock",
                            "chance": 1.0,
                            "data":
                            [

                            ],

                            "stories":
                            [
                                "str_meditation_activity_lock_stories_0",
                                "str_meditation_activity_lock_stories_1"
                            ]
                        },
                        {
                            "type": "go_missing",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 0.75, "duration": 1 },
                                { "chance": 0.25, "duration": 2 }
                            ],

                            "missing_stories":
                            [
                                "str_meditation_missing_stories_0",
                                "str_meditation_missing_stories_1"
                            ],

                            "found_stories":
                            [
                                "str_meditation_found_stories_0",
                                "str_meditation_found_stories_1"
                            ]

                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "enlightened" }
                            ],

                            "positive_stories":
                            [
                                "str_meditation_positive_quirk_stories_0",
                                "str_meditation_positive_quirk_stories_1"
                            ],

                            "negative_stories":
                            [
                                "str_meditation_negative_quirk_stories_0",
                                "str_meditation_negative_quirk_stories_1"
                            ]

                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "improved_balance" }
                            ],

                            "positive_stories":
                            [
                                "str_meditation_positive_quirk_stories_0",
                                "str_meditation_positive_quirk_stories_1"
                            ],

                            "negative_stories":
                            [
                                "str_meditation_negative_quirk_stories_0",
                                "str_meditation_negative_quirk_stories_1"
                            ]
                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "meditator" }
                            ],

                            "positive_stories":
                            [
                                "str_meditation_positive_quirk_stories_0",
                                "str_meditation_positive_quirk_stories_1"
                            ],

                            "negative_stories":
                            [
                                "str_meditation_negative_quirk_stories_0",
                                "str_meditation_negative_quirk_stories_1"
                            ]
                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "calm" }
                            ],

                            "positive_stories":
                            [
                                "str_meditation_positive_quirk_stories_0",
                                "str_meditation_positive_quirk_stories_1"
                            ],

                            "negative_stories":
                            [
                                "str_meditation_negative_quirk_stories_0",
                                "str_meditation_negative_quirk_stories_1"
                            ]
                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "unquiet_mind" }
                            ],

                            "positive_stories":
                            [
                                "str_meditation_positive_quirk_stories_0",
                                "str_meditation_positive_quirk_stories_1"
                            ],

                            "negative_stories":
                            [
                                "str_meditation_negative_quirk_stories_0",
                                "str_meditation_negative_quirk_stories_1"
                            ]

                        },
                        {
                            "type": "apply_buff",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance": 1.0, "buff_library_ids": [ "town_brothel_buff" ] }
                            ],

                            "positive_stories":
                            [
                                "str_meditation_positive_buff_stories_0",
                                "str_meditation_positive_buff_stories_1"
                            ],

                            "negative_stories":
                            [
                                "str_meditation_negative_buff_stories_0",
                                "str_meditation_negative_buff_stories_1"
                            ]
                        },
                        {
                            "type": "apply_buff",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance": 1.0, "buff_library_ids": [ "town_brothel_debuff" ] }
                            ],

                            "positive_stories":
                            [
                                "str_meditation_positive_buff_stories_0",
                                "str_meditation_positive_buff_stories_1"
                            ],

                            "negative_stories":
                            [
                                "str_meditation_negative_buff_stories_0",
                                "str_meditation_negative_buff_stories_1"
                            ]
                        },
                        {
                            "type": "change_currency",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance": 0.5, "type": "gold", "amount": 500 },
                                { "chance": 0.5, "type": "gold", "amount": -500 }
                            ],

                            "positive_stories":
                            [
                                "str_meditation_positive_currency_stories_0",
                                "str_meditation_positive_currency_stories_1"
                            ],

                            "negative_stories":
                            [
                                "str_meditation_negative_currency_stories_0",
                                "str_meditation_negative_currency_stories_1"
                            ]
                        },
                        {
                            "type": "add_trinket",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance" : 1.0, "rarity": "very_rare" },
                                { "chance" : 1.0, "rarity": "rare" },
                                { "chance" : 1.0, "rarity": "uncommon" },
                                { "chance" : 1.0, "rarity": "common" },
                                { "chance" : 1.0, "rarity": "very_common" }
                            ],

                            "stories":
                            [
                                "str_meditation_add_trinket_stories_0",
                                "str_meditation_add_trinket_stories_1"
                            ]
                        },
                        {
                            "type": "remove_trinket",
                            "chance": 0.0,
                            "data":
                            [

                            ],

                            "stories":
                            [
                                "str_meditation_remove_trinket_stories_0",
                                "str_meditation_remove_trinket_stories_1"
                            ]
                        }
                    ]
                },
                "requirements":
                [
                    {
                        "type": "not_have_quirks",
                        "data":
                        {
                            "quirk_library_names":
                            [
                                "unquiet_mind",
                                "alcoholism",
                                "gambler",
                                "love_interest",
                                "god_fearing",
                                "flagellant"
                            ]
                        }
                    }
                ],
                "miscellaneous" :
                {
                    "caretaker_friendly" : true
                },
                "cost_upgrades":
                [
                    { "cost_currency": { "type": "gold", "amount": 1000 } },
                    { "cost_currency": { "type": "gold", "amount": 850 }, "upgrade_requirement_code": "b" },
                    { "cost_currency": { "type": "gold", "amount": 700 }, "upgrade_requirement_code": "e" }
                ],

                "slot_upgrades":
                [
                    { "number_of_slots": 1 },
                    { "number_of_slots": 2, "upgrade_requirement_code": "c" },
                    { "number_of_slots": 3, "upgrade_requirement_code": "f" }
                ],

                "stress_upgrades":
                [
                    { "heal_low": 45, "heal_high": 45 },
                    { "heal_low": 56, "heal_high": 56, "upgrade_requirement_code": "a" },
                    { "heal_low": 70, "heal_high": 70, "upgrade_requirement_code": "d" }
                ],

                "affliction_cure_upgrades":
                [
                    { "chance": 1.00 },
                    { "chance": 0.10, "upgrade_requirement_code": "g" }
                ]
            },

            "prayer":
            {
                "side_effects":
                {
                    "chance": 0.35,
                    "results":
                    [
                        {
                            "type": "activity_lock",
                            "chance": 1.0,
                            "data":
                            [

                            ]
                        },
                        {
                            "type": "go_missing",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 0.75, "duration": 1 },
                                { "chance": 0.25, "duration": 2 }
                            ]
                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "god_fearing" }
                            ]
                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "witness" }
                            ]
                        },
                        {
                            "type": "apply_buff",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance": 1.0, "buff_library_ids": [ "town_brothel_buff" ] }
                            ]
                        },
                        {
                            "type": "apply_buff",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance": 1.0, "buff_library_ids": [ "town_brothel_debuff" ] }
                            ]
                        },
                        {
                            "type": "change_currency",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "type": "gold", "amount": -1000 }
                            ]
                        },
                        {
                            "type": "add_trinket",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance" : 1.0, "rarity": "very_rare" },
                                { "chance" : 1.0, "rarity": "rare" },
                                { "chance" : 1.0, "rarity": "uncommon" },
                                { "chance" : 1.0, "rarity": "common" },
                                { "chance" : 1.0, "rarity": "very_common" }
                            ]
                        },
                        {
                            "type": "remove_trinket",
                            "chance": 0.0,
                            "data":
                            [

                            ]
                        }
                    ]
                },
                "requirements":
                [
                    {
                        "type": "not_have_quirks",
                        "data":
                        {
                            "quirk_library_names":
                            [
                                "witness",
                                "faithless",
                                "alcoholism",
                                "gambler",
                                "love_interest",
                                "enlightened",
                                "flagellant"
                            ]
                        }
                    }
                ],
                "miscellaneous" :
                {
                    "caretaker_friendly" : true
                },
                "cost_upgrades":
                [
                    { "cost_currency": { "type": "gold", "amount": 1250 } },
                    { "cost_currency": { "type": "gold", "amount": 1050 }, "upgrade_requirement_code": "b" },
                    { "cost_currency": { "type": "gold", "amount": 900 }, "upgrade_requirement_code": "e" }
                ],

                "slot_upgrades":
                [
                    { "number_of_slots": 1 },
                    { "number_of_slots": 2, "upgrade_requirement_code": "c" },
                    { "number_of_slots": 3, "upgrade_requirement_code": "f" }
                ],

                "stress_upgrades":
                [
                    { "heal_low": 55, "heal_high": 55 },
                    { "heal_low": 69, "heal_high": 69, "upgrade_requirement_code": "a" },
                    { "heal_low": 86, "heal_high": 86, "upgrade_requirement_code": "d" }
                ],

                "affliction_cure_upgrades":
                [
                    { "chance": 1.00 },
                    { "chance": 0.10, "upgrade_requirement_code": "g" }
                ]
            },
            "flagellation":
            {
                "side_effects":
                {
                    "chance": 0.30,
                    "results":
                    [
                        {
                            "type": "activity_lock",
                            "chance": 1.0,
                            "data":
                            [

                            ]
                        },
                        {
                            "type": "go_missing",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 0.75, "duration": 1 },
                                { "chance": 0.25, "duration": 2 }
                            ]
                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "flagellant" }
                            ]
                        },
                        {
                            "type": "add_quirk",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "quirk_library_name": "faithless" }
                            ]
                        },
                        {
                            "type": "apply_buff",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "buff_library_ids": [ "townFlagellationDMGLowBuff", "townFlagellationDMGHighBuff" ] }
                            ]
                        },
                        {
                            "type": "apply_buff",
                            "chance": 1.0,
                            "data":
                            [
                                { "chance": 1.0, "buff_library_ids": [ "townFlagellationDMGLowDebuff", "townFlagellationDMGHighDebuff" ] }
                            ]
                        },
                        {
                            "type": "change_currency",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance": 0.5, "type": "gold", "amount": 500 },
                                { "chance": 0.5, "type": "gold", "amount": -500 }
                            ]
                        },
                        {
                            "type": "add_trinket",
                            "chance": 0.0,
                            "data":
                            [
                                { "chance" : 1.0, "rarity": "very_rare" },
                                { "chance" : 1.0, "rarity": "rare" },
                                { "chance" : 1.0, "rarity": "uncommon" },
                                { "chance" : 1.0, "rarity": "common" },
                                { "chance" : 1.0, "rarity": "very_common" }
                            ]
                        },
                        {
                            "type": "remove_trinket",
                            "chance": 0.0,
                            "data":
                            [

                            ]
                        }
                    ]
                },
                "requirements":
                [
                    {
                        "type": "not_have_quirks",
                        "data":
                        {
                            "quirk_library_names":
                            [
                                "faithless",
                                "alcoholism",
                                "gambler",
                                "love_interest",
                                "enlightened",
                                "god_fearing"
                            ]
                        }
                    }
                ],
                "miscellaneous" :
                {
                    "caretaker_friendly" : true
                },
                "cost_upgrades":
                [
                    { "cost_currency": { "type": "gold", "amount": 1500 } },
                    { "cost_currency": { "type": "gold", "amount": 1300 }, "upgrade_requirement_code": "b" },
                    { "cost_currency": { "type": "gold", "amount": 1100 }, "upgrade_requirement_code": "e" }
                ],

                "slot_upgrades":
                [
                    { "number_of_slots": 1 },
                    { "number_of_slots": 2, "upgrade_requirement_code": "c" },
                    { "number_of_slots": 3, "upgrade_requirement_code": "f" }
                ],

                "stress_upgrades":
                [
                    { "heal_low": 65, "heal_high": 65 },
                    { "heal_low": 81, "heal_high": 81, "upgrade_requirement_code": "a" },
                    { "heal_low": 100, "heal_high": 100, "upgrade_requirement_code": "d" }
                ],

                "affliction_cure_upgrades":
                [
                    { "chance": 1.00 },
                    { "chance": 0.10, "upgrade_requirement_code": "g" }
                ]
            }
        }
    }
}